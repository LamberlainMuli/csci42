{% extends 'base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'marketplace/styles.css' %}" />

<div class="search-header horizontal-container">
  {% if user.is_authenticated %}
    <p>Welcome, {{ user.username }}!</p>
    <a href="{% url 'marketplace:product-create' %}" class="create-product-btn">Create Product</a>
  {% else %}
    <a href="{% url 'user:login' %}">Login</a>
    <a href="{% url 'user:register' %}">Register</a>
  {% endif %}
  <form method="GET" action="{% url 'marketplace:home' %}">
    <input type="text" name="q" placeholder="Search products..." value="{{ request.GET.q }}" />
  </form>
  <div class="icon-container">
    <!-- SVG icon here -->
  </div>
</div>

<div class="search-filter">
  <p>Found {{ products|length }} results.</p>
  <div class="filters">
    <div>Sort</div>
    <div class="icon-container">
      <!-- SVG icon here -->
    </div>
  </div>
</div>

<!-- Display Products -->
<div class="search-results">
	{% for product in products %}
	<div class="search-result vertical-container">
	  <h2>
		<a href="{% url 'marketplace:product-detail' product.pk %}">{{ product.title }}</a>
	  </h2>
	  {% if product.primary_image %}
		<img src="{{ product.primary_image.image.url }}" alt="{{ product.title }}" style="max-width:200px;">
	  {% else %}
		<p>No image available</p>
	  {% endif %}
	  <p>Price: â‚±{{ product.price }}</p>
	  <p>Category: {{ product.get_category_display }}</p>
	</div>
  {% empty %}
	<p>No products found.</p>
  {% endfor %}
</div>
{% endblock %}  
